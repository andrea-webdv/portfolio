/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";async function e(e,t,n){const o=e+e+e,r=(new TextEncoder).encode(o);let a,i=localStorage.getItem(e);i?(console.log("salt recovered: ",i),a=i):(a=function(e){let t="";for(let n=0;n<e;n++){let e=Math.round(122*Math.random()+33);t+=String.fromCharCode(e)}return t}(o.length),localStorage.setItem(e,a));const c=(new TextEncoder).encode(a),l=r.length+t.length+c.length,s=new Uint8Array(l);let u=0;s.set(r,u),u=r.length,s.set(t,u),u=r.length+t.length,s.set(c,u);let d=await crypto.subtle.digest("SHA-256",s);console.log("digested: ",d);const p=new Uint8Array(d);console.log("converted in unit8: ",p);let g=function(e){let t="";for(let n=0;n<16;n++){function o(e){return e<33?o(e+=33):e>122?o(e-=100):String.fromCharCode(e)}t+=o(e[n])}return t}(p);return g.length>n&&g.slice(0,n-1),{output:g}}function t(){var e,o,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(t,r,a,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return n(u,"_invoke",function(t,n,r){var a,i,c,s=0,u=r||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,n){return a=t,i=0,c=e,p.n=n,l}};function g(t,n){for(i=t,c=n,o=0;!d&&s&&!r&&o<u.length;o++){var r,a=u[o],g=p.p,f=a[2];t>3?(r=f===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=g&&((r=t<2&&g<a[1])?(i=0,p.v=n,p.n=a[1]):g<f&&(r=t<3||a[0]>n||n>f)&&(a[4]=t,a[5]=n,p.n=f,i=0))}if(r||t>1)return l;throw d=!0,n}return function(r,u,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&g(u,f),i=u,c=f;(o=i<2?e:c)||!d;){a||(i?i<3?(i>1&&(p.n=-1),g(i,c)):p.n=c:p.v=c);try{if(s=2,a){if(i||(r="next"),o=a[r]){if(!(o=o.call(a,c)))throw TypeError("iterator result is not an object");if(!o.done)return o;c=o.value,i<2&&(i=0)}else 1===i&&(o=a.return)&&o.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=e}else if((o=(d=p.n<0)?c:t.call(n,p))!==l)break}catch(t){a=e,i=1,c=t}finally{s=1}}return{value:o,done:d}}}(t,a,i),!0),u}var l={};function s(){}function u(){}function d(){}o=Object.getPrototypeOf;var p=[][a]?o(o([][a]())):(n(o={},a,function(){return this}),o),g=d.prototype=s.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e}return u.prototype=d,n(g,"constructor",d),n(d,"constructor",u),u.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(g),n(g,i,"Generator"),n(g,a,function(){return this}),n(g,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:f}})()}function n(e,t,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,o,r){if(t)a?a(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o;else{var i=function(t,o){n(e,t,function(e){return this._invoke(t,o,e)})};i("next",0),i("throw",1),i("return",2)}},n(e,t,o,r)}function o(e,t,n,o,r,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(o,r)}var r=document.querySelector("dialog"),a=document.querySelector("#submit"),i=document.getElementById("img"),c=document.getElementById("name").childNodes[1],l=document.querySelector("#preview"),s=document.querySelector("#choosed"),u=(s.innerHTML,document.querySelector("#monitor")),d=document.querySelector("#length");d=d.value;var p=document.querySelector("article"),g=document.querySelector(".run"),f=document.createElement("input");f.type="password",f.classList.add("passwords","noData"),f.autocomplete="new-password",f.name="outcome",f.disabled=!0;var m=document.createElement("div");m.classList.add("overlayed"),m.append(f),g.append(m);var v,h=document.querySelector("#alternative"),y=document.querySelector("main");i.addEventListener("change",function(e){var t=e.target.files[0];if(console.log("is an image?","image/png"===t.type||"image/jpeg"===t.type),"image/png"!==t.type&&"image/jpeg"!==t.type)return l.removeAttribute("scr"),l.style.display="none",u.classList.add("wrongData"),void console.log("not an image");if(t){console.log("start reading"),"#text"===u.lastChild.nodeName&&u.removeChild(u.lastChild);var n=new FileReader,o=new FileReader;n.readAsArrayBuffer(t),n.onload=function(e){(v=new Uint8Array(e.target.result))?console.log("readed"):console.log("Not readed")},o.readAsDataURL(t),o.onload=function(e){u.children.length>1&&u.removeChild(u.lastChild),l.style.display="inline-block",l.src=e.target.result,u.classList.contains("wrongData")?u.classList.replace("wrongData","rightData"):u.classList.add("rightData")},n.onerror=function(e){console.error(e.target.result),u.classList.add("wrongData")},o.onerror=function(e){console.error(e.target.result),u.classList.add("wrongData")}}}),c.addEventListener("mouseover",function(){c.setAttribute("type","text")}),c.addEventListener("mouseout",function(){c.setAttribute("type","password")}),f.onmouseover=function(){f.setAttribute("type","text")},f.onmouseout=function(){f.setAttribute("type","password")},a.addEventListener("click",function(){var n,a=(n=t().m(function n(o){var a,i,s,u;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:if(o.preventDefault(),!((a=c.value).length<5)&&l.hasAttribute("src")){t.n=1;break}return r.showModal(),t.a(2);case 1:return i=v,t.p=2,s=null,f.innerText="elaboration...",console.log("elaboration..."),t.n=3,e(a,i,d);case 3:s=t.v,console.log("lettura pass: ",s),s&&(f.value=s.output,navigator.clipboard.writeText(s.output)),t.n=5;break;case 4:t.p=4,u=t.v,console.warn(u.message);case 5:return t.a(2)}},n,null,[[2,4]])}),function(){var e=this,t=arguments;return new Promise(function(r,a){var i=n.apply(e,t);function c(e){o(i,r,a,c,l,"next",e)}function l(e){o(i,r,a,c,l,"throw",e)}c(void 0)})});return function(e){return a.apply(this,arguments)}}());var w=document.documentElement,b=getComputedStyle(w),S=parseFloat(b.getPropertyValue("--button-size"));window.addEventListener("resize",function(){b.getPropertyValue("--controlled-width").toString();var e=i.offsetWidth,t=parseFloat(getComputedStyle(a).borderTopWidth),n=e-S-2*t-1;w.style.setProperty("--controlled-width","".concat(n,"px"))});var E=window.matchMedia("(max-width: 700px)");E.onchange=function(){var e=p.children;E.matches?(console.log("choosed? ",e[2]),h.classList.remove("hidden"),"choosed"===e[2].id&&p.removeChild(e[2]),h.append(s)):"choosed"!==y.firstElementChild.id&&(h.innerHTML="",h.classList.toggle("hidden"),y.append(s))},window.addEventListener("load",function(){window.dispatchEvent(new Event("change")),window.dispatchEvent(new Event("resize")),sessionStorage.clear(),sessionStorage.setItem("reloaded","true"),sessionStorage.getItem("reloaded")||(location.reload(),console.log("reloaded"))})})();